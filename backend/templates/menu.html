<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒØªÙ„ÙˆØ¬ Ù…Ù†ØªØ¬Ø§Øª - Ø¹Ø·Ø§Ø±Ø© ÙÙŠÙØ§</title>

    <style>
        body {
            font-family: "Tajawal", sans-serif;
            background-color: #f8f7f2;
            margin: 0;
            padding: 0;
            text-align: center;
        }

        header {
            background-color: #a9a569;
            color: #fff;
            padding: 15px 0;
            font-size: 20px;
            font-weight: bold;
        }

        /* ğŸ–¼ï¸ Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø± */
        .logo-area {
            margin: 20px 0 10px;
        }

        .logo-area img {
            height: 100px;
            border-radius: 12px;
        }

        /* ğŸ­ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .categories {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px auto;
        }

        .cat-btn {
            background-color: #fff;
            color: #665549;
            border: 2px solid #a9a569;
            border-radius: 14px;
            padding: 12px 18px;
            font-size: 15px;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }

        .cat-btn:hover {
            background-color: #a9a569;
            color: #fff;
        }

        .cat-btn.active {
            background-color: #665549;
            color: #fff;
            border-color: #665549;
        }

        /* ğŸ”˜ Ø´Ø±ÙŠØ· Ø§Ù„ÙÙ„Ø§ØªØ± */
        .filter-bar {
            margin: 10px auto 10px;
            text-align: center;
        }

        .filter-btn {
            background-color: #a9a569;
            color: #fff;
            border: none;
            border-radius: 10px;
            padding: 8px 14px;
            margin: 0 5px;
            cursor: pointer;
            font-size: 14px;
            transition: 0.3s;
        }

        .filter-btn:hover {
            background-color: #8e8a54;
        }

        .filter-btn.active {
            background-color: #665549;
        }

        /* ğŸ” Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø­Ø« */
        #menuSearch {
            width: 80%;
            max-width: 400px;
            padding: 10px;
            margin: 15px auto;
            border-radius: 10px;
            border: 1px solid #ccc;
            text-align: right;
            font-size: 15px;
        }

        #resetBtn {
            background: #eee;
            color: #333;
            border: none;
            border-radius: 8px;
            padding: 8px 14px;
            cursor: pointer;
            margin-bottom: 10px;
            font-size: 14px;
            display: none;
        }

        #resetBtn:hover {
            background: #ddd;
        }

        /* ğŸ›’ Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            padding: 30px;
            max-width: 1100px;
            margin: auto;
        }

        .product {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            padding: 15px;
            transition: transform 0.2s ease;
        }

        .product:hover {
            transform: translateY(-5px);
        }

        .product img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 12px;
        }

        .product h3 {
            margin: 12px 0 5px;
            color: #665549;
            font-size: 18px;
        }

        .status {
            font-size: 14px;
            padding: 5px 10px;
            border-radius: 8px;
            display: inline-block;
        }

        .available {
            background-color: #d6f5d6;
            color: #2a7a2a;
        }

        .unavailable {
            background-color: #f5d6d6;
            color: #a12a2a;
        }

        /* ğŸ“¤ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© */
        .share-bar {
            margin: 15px 0;
        }

        .share-btn {
            border: none;
            border-radius: 8px;
            padding: 8px 14px;
            margin: 0 5px;
            font-size: 14px;
            cursor: pointer;
            transition: 0.3s;
        }

        #copyBtn {
            background: #fff;
            color: #665549;
        }

        #copyBtn:hover {
            background: #eee;
        }

        #whatsappBtn {
            background: #25D366;
            color: #fff;
        }

        #whatsappBtn:hover {
            background: #1DA851;
        }

        footer {
            margin-top: 40px;
            color: #777;
            font-size: 14px;
            padding: 20px;
        }
    </style>
</head>
<body>

<header>
    ÙƒØªÙ„ÙˆØ¬ Ù…Ù†ØªØ¬Ø§Øª - Ø¹Ø·Ø§Ø±Ø© ÙÙŠÙØ§
    <div class="share-bar">
        <button id="copyBtn" class="share-btn">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
        <button id="whatsappBtn" class="share-btn">ğŸ’¬ Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨</button>
    </div>
</header>

<!-- ğŸ–¼ï¸ Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø± -->
{% if logo %}
<div class="logo-area">
    <img src="{{ url_for('static', filename='uploads/' + logo) }}" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø±">
</div>
{% endif %}

<!-- ğŸ­ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
<div class="categories">
    <button class="cat-btn {% if category == 'factory' %}active{% endif %}" onclick="window.location='?category=factory'">ğŸ­ ÙƒØªÙ„ÙˆØ¬ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØµÙ†Ø¹</button>
    <button class="cat-btn {% if category == 'warehouse' %}active{% endif %}" onclick="window.location='?category=warehouse'">ğŸ¬ ÙƒØªÙ„ÙˆØ¬ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹</button>
    <button class="cat-btn {% if category == 'purchases' %}active{% endif %}" onclick="window.location='?category=purchases'">ğŸ§¾ ÙƒØªÙ„ÙˆØ¬ Ù…Ù†ØªØ¬Ø§Øª Ù…ÙƒØªØ¨ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</button>
</div>

<!-- ğŸ”˜ Ø´Ø±ÙŠØ· Ø§Ù„ÙÙ„Ø§ØªØ± -->
<div class="filter-bar">
    <button class="filter-btn active" data-filter="all">Ø§Ù„ÙƒÙ„</button>
    <button class="filter-btn" data-filter="available">Ø§Ù„Ù…ØªÙˆÙØ± ÙÙ‚Ø·</button>
    <button class="filter-btn" data-filter="unavailable">ØºÙŠØ± Ø§Ù„Ù…ØªÙˆÙØ± ÙÙ‚Ø·</button>
</div>

<!-- ğŸ” Ø§Ù„Ø¨Ø­Ø« -->
<input type="text" id="menuSearch" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...">
<button id="resetBtn">ğŸ” Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>

<!-- ğŸ›’ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
<div class="container">
    {% for product in products %}
    <div class="product">
        {% if product[2] %}
            <img src="{{ url_for('static', filename='uploads/' + product[2]) }}" alt="{{ product[1] }}">
        {% else %}
            <img src="https://via.placeholder.com/220x180?text=No+Image" alt="">
        {% endif %}

        <h3>{{ product[1] }}</h3>

        {% if product[3] == 1 %}
            <span class="status available">Ù…ØªÙˆÙØ± âœ…</span>
        {% else %}
            <span class="status unavailable">ØºÙŠØ± Ù…ØªÙˆÙØ± âŒ</span>
        {% endif %}
    </div>
    {% endfor %}
</div>

<footer>
    Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø´Ø±ÙƒØ© Ø¹Ø·Ø§Ø±Ø© ÙÙŠÙØ§
</footer>

<!-- ğŸ“œ Ø³ÙƒØ±Ø¨ØªØ§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§Ù„ÙÙ„ØªØ±Ø© ÙˆØ§Ù„Ø¨Ø­Ø« -->
<script>
    // Ø²Ø± Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
    const currentUrl = window.location.href;
    document.getElementById("copyBtn").addEventListener("click", () => {
        navigator.clipboard.writeText(currentUrl);
        alert("âœ… ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ÙƒØªÙ„ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­!");
    });

    // Ø²Ø± Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨
    document.getElementById("whatsappBtn").addEventListener("click", () => {
        const text = encodeURIComponent("ğŸ“œ ØªØµÙØ­ ÙƒØªÙ„ÙˆØ¬ Ù…Ù†ØªØ¬Ø§Øª Ø¹Ø·Ø§Ø±Ø© ÙÙŠÙØ§:\n" + currentUrl);
        window.open(`https://wa.me/?text=${text}`, "_blank");
    });

    // ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© (Ù…ØªÙˆÙØ± / ØºÙŠØ± Ù…ØªÙˆÙØ±)
    const filterButtons = document.querySelectorAll(".filter-btn");
    const products = document.querySelectorAll(".product");

    filterButtons.forEach(btn => {
        btn.addEventListener("click", () => {
            filterButtons.forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            const filter = btn.getAttribute("data-filter");
            products.forEach(p => {
                const available = p.querySelector(".status").classList.contains("available");
                if (filter === "all" || (filter === "available" && available) || (filter === "unavailable" && !available)) {
                    p.style.display = "block";
                } else {
                    p.style.display = "none";
                }
            });
        });
    });

    // ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ
    const searchInput = document.getElementById("menuSearch");
    const resetBtn = document.getElementById("resetBtn");

    searchInput.addEventListener("input", function() {
        const filter = this.value.toLowerCase().trim();
        let hiddenCount = 0;

        products.forEach(p => {
            const name = p.querySelector("h3").textContent.toLowerCase();
            const match = name.includes(filter);
            p.style.display = match ? "block" : "none";
            if (!match) hiddenCount++;
        });

        resetBtn.style.display = filter ? "inline-block" : "none";
    });

    resetBtn.addEventListener("click", () => {
        searchInput.value = "";
        products.forEach(p => p.style.display = "block");
        resetBtn.style.display = "none";
    });
</script>

</body>
</html>


